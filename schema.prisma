datasource db {
  provider = "mysql"
  url      = "mysql://admin:@Senha1234@localhost:3306/minerva"
}

generator client {
  provider = "prisma-client-js"
}

model User {
  matricula String      @id
  nome      String
  email     String      @unique
  role      String
  suaptoken String
  apptoken  String
  comissao  Boolean
  inscricao Inscricao[]
  demandas  Demanda[]

  @@map("users")
}

model Demanda {
  id            Int        @id @default(autoincrement())
  id_disciplina Int
  orientador    String
  qnt_bolsas    Int
  requisitos    String
  disciplina    Disciplina @relation(fields: [id_disciplina], references: [id])
  user          User @relation(fields: [orientador], references: [matricula])
  edital        Edital[]
}

model Disciplina {
  id            Int       @id @default(autoincrement())
  nome          String
  carga_horaria Int
  demandas      Demanda[]
}

model Edital {
  id         Int        @id @default(autoincrement())
  titulo     String
  id_demanda Int
  demanda    Demanda   @relation(fields: [id_demanda], references: [id])
  inscricoes Inscricao[]
}

model Inscricao {
  id_edital Int
  matricula String
  aprovado  Int
  nota      Float
  user      User    @relation(fields: [matricula], references: [matricula])
  edital    Edital  @relation(fields: [id_edital], references: [id])

  @@id([id_edital, matricula])
}